<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<script type="text/javascript">
	var data = [
	 {
		"user_id": "18610",
		"nickname": "网签中心",
		"head_img_url": "https://wozai.tonyliangli.cn/uploads/images/default_head_img.png",
		"current_position": "",
		"current_company": "",
		"current_degree": "",
		"current_contact": "",
		"titleSize": "15",
		"title": "网签中心",
		"img": "https://wozai.tonyliangli.cn/uploads/images/default_head_img.png",
		"flag": "W",
		"litter": "WQZX",
		"type": "3",
		"sex": "1",
		"remark_nickname": "",
		"remark_real_name": "",
		"remark_head_img_url": "",
		"remark_sex": "",
		"remark_birthday": "",
		"remark_hometown": "",
		"remark_current_company": "",
		"remark_current_position": "",
		"remark_current_degree": "",
		"remark_current_contact": ""
	}, {
		"user_id": "18608",
		"nickname": "网签张亚茹",
		"head_img_url": "https://wozai.tonyliangli.cn/uploads/images/default_head_img.png",
		"current_position": "",
		"current_company": "",
		"current_degree": "",
		"current_contact": "",
		"titleSize": "15",
		"title": "网签张亚茹",
		"img": "https://wozai.tonyliangli.cn/uploads/images/default_head_img.png",
		"flag": "W",
		"litter": "WQZYR",
		"type": "3",
		"sex": "1",
		"remark_nickname": "",
		"remark_real_name": "",
		"remark_head_img_url": "",
		"remark_sex": "",
		"remark_birthday": "",
		"remark_hometown": "",
		"remark_current_company": "",
		"remark_current_position": "",
		"remark_current_degree": "",
		"remark_current_contact": ""
	}, {
		"user_id": "18670",
		"nickname": "177777",
		"head_img_url": "https://wozai.tonyliangli.cn/uploads/images/default_head_img.png",
		"current_position": "",
		"current_company": "",
		"current_degree": "",
		"current_contact": "",
		"titleSize": "15",
		"title": "177777",
		"img": "https://wozai.tonyliangli.cn/uploads/images/default_head_img.png",
		"flag": "1",
		"litter": "177777",
		"type": "1",
		"sex": "1",
		"remark_nickname": "",
		"remark_real_name": "",
		"remark_head_img_url": "",
		"remark_sex": "",
		"remark_birthday": "",
		"remark_hometown": "",
		"remark_current_company": "",
		"remark_current_position": "",
		"remark_current_degree": "",
		"remark_current_contact": ""
	}
]

	 function paixv (data) {
	 	console.log('未处理的数据:'+JSON.stringify(data.length))
	 	  for (var i = 0; i < data.length; i++) {
            for (var j = 0; j < data.length; j++) {
                if (data[i].litter < data[j].litter) {
                    var temp = data[i];
                    data[i] = data[j];
                    data[j] = temp;
                }
            }
        }
        
        for (var i = 0; i < data.length; i++) {
            data[i].placeholderImg = "widget://image/icon_defaultHead.png";
            if (data[i].remark_head_img_url) {
                data[i].img = data[i].remark_head_img_url;
            } 
            if (data[i].remark_nickname) {
                data[i].title = data[i].remark_nickname
            }
            if (f_check_uppercase(data[0].flag)) {
                data[0].initial = data[0].flag;
            } else {
                data[0].initial = '#';
            }
            if (i>0) {
                if (data[i].flag !== data[i-1].flag) {
                    if (f_check_uppercase(data[i].flag)) {
                        data[i].initial = data[i].flag;
                    } else {
                        data[i].initial = '#';
                    }
                }
            }

         }
        console.log('未处理的数据222:'+JSON.stringify(data))
      
        var arr = {}
        var a;
        for (var i = 0; i < data.length; i++) {
            if (data[i].initial) {	
                if (data[i].initial == '#') {
                    if (arr[data[i].initial]) {
                    	a = i;
                        // arr[data[i].initial].push (data[i])
                    } else {
                        arr[data[i].initial] = [];
                        a = i;
                        // arr[data[i].initial].push (data[i])
                    }

                } else {
                    arr[data[i].initial] = [];
                    a = i;
                }
            } 
            	arr[data[a].initial].push (data[i])
        }
        console.log('处理完的数据:'+JSON.stringify(arr))
        return arr;
    }
     function f_check_uppercase(obj)   {          
       if (/[A-Z]/.test(obj))    {   
          return true;   
       }    
       return false;   
    }
    console.log(paixv(data))
	</script>
</body>
</html>

