<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
    <title>底部导航</title>
    <link rel="stylesheet" type="text/css" href="../css/api.css" />
    <link rel="stylesheet" type="text/css" href="../css/style.css" />
    <style>
        header {
            background-color: #3A393E;
        }
        
        header ul li {
            color: #fff;
            height: 1rem;
            line-height: 1rem;
            text-align: center;
            display: none;
            position: relative;
            font-size: .36rem;
        }
        
        header ul li.active {
            display: block;
        }
        
        header ul li:nth-child(1) span {
            display: inline-block;
            width: .39rem;
            height: .39rem;
            background: url(../image/icon_add.png) no-repeat;
            -webkit-background-size: .39rem .39rem;
            background-size: .39rem .39rem;
            position: absolute;
            right: .2rem;
            bottom: .3rem;
        }
        
        .addWin {
            width: 2.24rem;
            height: 1.74rem;
            background: url(../image/bg_news.png)no-repeat;
            -webkit-background-size: 2.24rem 1.74rem;
            background-size: 2.24rem 1.74rem;
            position: absolute;
            right: .1rem;
            top: 1.1rem;
            padding-top: .1rem;
            display: block;
            z-index: 1000;
        }
        
        .addWin p {
            padding-left: .3rem;
            height: .82rem;
            line-height: .8rem;
            font-size: .28rem;
        }
        
        .addWin p:nth-child(1) {
            background: url(../image/icon_add.png)no-repeat;
            background-position: .15rem .22rem;
            -webkit-background-size: .41rem .41rem;
            background-size: .41rem .41rem;
            border-bottom: .01rem solid #959498;
        }
        
        .addWin p:nth-child(2) {
            background: url(../image/icon_sao.png)no-repeat;
            background-position: .15rem .22rem;
            -webkit-background-size: .41rem .41rem;
            background-size: .41rem .41rem;
        }
        
        #footer {
            background-color: #f2f2f2;
            position: fixed;
            bottom: 0;
            width: 7.5rem;
        }
        
        #footer ul li {
            padding-top: .66rem;
            padding-bottom: .1rem;
            background: url() no-repeat center .15rem;
            background-size: auto .4rem;
            text-align: center;
            position: relative;
        }
        
        #footer ul li.active {
            color: #0ABB07;
        }
        
        #footer ul li:nth-child(1) {
            background-image: url(../image/icon_footer/bottombtn0101.png);
        }
        
        #footer ul li:nth-child(2) {
            background-image: url(../image/icon_footer/bottombtn0201.png);
        }
        
        #footer ul li:nth-child(3) {
            background-image: url(../image/icon_footer/bottombtn0301.png);
        }
        
        #footer ul li:nth-child(4) {
            background-image: url(../image/icon_footer/bottombtn0401.png);
        }
        
        #footer ul li:nth-child(5) {
            background-image: url(../image/icon_footer/bottombtn0501.png);
        }
        
        #footer ul li:nth-child(1).active {
            background-image: url(../image/icon_footer/bottombtn0102.png);
        }
        
        #footer ul li:nth-child(2).active {
            background-image: url(../image/icon_footer/bottombtn0202.png);
        }
        
        #footer ul li:nth-child(3).active {
            background-image: url(../image/icon_footer/bottombtn0302.png);
        }
        
        #footer ul li:nth-child(4).active {
            background-image: url(../image/icon_footer/bottombtn0402.png);
        }
        
        #footer ul li:nth-child(5).active {
            background-image: url(../image/icon_footer/bottombtn0502.png);
        }
        #footer ul li.news:before {
            content: "";
                display: inline-block;
                width: .1rem;
                height: .1rem;
                background-color: #f00;
                border-radius: .2rem;
                position: absolute;
                top: .2rem;
                right: .4rem;
        }
        .show {
            display: block;
        }
    </style>
</head>

<body>
    <div id="wrap" class="flex-wrap flex-vertical">
        <header>
            <ul>
                <li class="border-b active">
                    我在
                    <span id="addFellow" onclick="addFellow()"></span>
                </li>
                <li class="border-b">通讯录</li>
                <li class="border-b">供求</li>
                <li class="border-b">发现</li>
                <li class="border-b">我</li>
            </ul>
        </header>
        <div id="main" class="flex-con">
        </div>
        <div id="footer" class="border-t">
            <ul class="flex-wrap">
                <li tapmode="hover" onclick="randomSwitchBtn( this );" class="flex-con active ">我在</li>
                <li tapmode="hover" onclick="randomSwitchBtn( this );" class="flex-con ">通讯录</li>
                <li tapmode="hover" onclick="randomSwitchBtn( this );" class="flex-con ">供求</li>
                <li tapmode="hover" onclick="randomSwitchBtn( this );" class="flex-con ">发现</li>
                <li tapmode="hover" onclick="randomSwitchBtn( this );" class="flex-con news">我</li>
            </ul>
        </div>
    </div>
</body>

</html>
<script type="text/javascript" src="../script/api.js"></script>
<script type="text/javascript" src="../script/common.js"></script>
<script type="text/javascript">
                    
// var userToken, rongToken;
apiready = function() {
    // 获取传递参数
    // userToken = api.pageParam.userToken;
    // rongToken = api.pageParam.rongToken;
    moduleInit();

    $api.fixStatusBar($api.dom('header'));
    api.setStatusBarStyle({
        style: 'dark',
        color: '#6ab494'
    });
    funIniGroup();
    // 退出app
    exitApp();
}


function funIniGroup() {
    var eHeaderLis = $api.domAll('header li'),
        frames = [];
    for (var i = 0, len = eHeaderLis.length; i < len; i++) {
        // 个人中心页面不弹动
        if (i === 4) {
            frames.push({
                name: 'frame' + i,
                url: './frame' + i + '.html',
                bgColor: 'rgba(0,0,0,.2)',
                // pageParam: {
                //     userToken: userToken,
                //     rongToken: rongToken
                // },
                bounces: false
            }) 
        } else {
            frames.push({
                name: 'frame' + i,
                url: './frame' + i + '.html',
                bgColor: 'rgba(0,0,0,.2)',
                // pageParam: {
                //     userToken: userToken,
                //     rongToken: rongToken
                // },
                bounces: true
            })
        }
    }
    api.openFrameGroup({
        name: 'group',
        scrollEnabled: false,
        rect: {
            x: 0,
            y: $api.dom('header').offsetHeight,
            w: api.winWidth,
            h: api.winHeight - $api.dom('header').offsetHeight - $api.dom('#footer').offsetHeight
        },
        index: 0,
        frames: frames
    }, function(ret, err) {

    });
}

// 随意切换按钮
function randomSwitchBtn(tag) {
    if (tag == $api.dom('#footer li.active')) return;
    var eFootLis = $api.domAll('#footer li'),
        eHeaderLis = $api.domAll('header li'),
        index = 0;
    for (var i = 0, len = eFootLis.length; i < len; i++) {
        if (tag == eFootLis[i]) {
            index = i;
        } else {
            $api.removeCls(eFootLis[i], 'active');
            $api.removeCls(eHeaderLis[i], 'active');
        }
    }
    $api.addCls(eFootLis[index], 'active');
    $api.addCls(eHeaderLis[index], 'active');
    api.setFrameGroupIndex({
        name: 'group',
        index: index
    });
}

// 添加好友按钮
function addFellow() {
    // $api.addCls($api.dom('.addWin'), 'show')
    //添加时间，控制frame0页面的添加好友弹框的显示，如果在该页面写会被frame覆盖
    api.sendEvent({
        name: 'showNews',
    });
}
</script>
