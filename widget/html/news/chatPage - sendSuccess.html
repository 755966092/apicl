<!-- <!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8"><meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
    <title>title</title>
    <link rel="stylesheet" type="text/css" href="../../css/api.css" />
    <style>
    body {}
    
    header {
        background-color: #3A393E;
        height: 1rem;
        color: #fff;
        line-height: 1rem;
        text-align: center;
        position: relative;
        font-size: .36rem;
        position: relative;
    }
    
    header span:nth-child(1) {
        position: absolute;
        left: 0;
        background: url(../../image/icon_fanh.png)no-repeat;
        background-size: .22rem .37rem;
        padding-left: .45rem;
        background-position: .1rem .34rem;
    }
    </style>
</head>

<body>
    <header>
        <span   tapmode="hover"   onclick="api.closeWin()">返回</span>
        <span id="title"></span>
    </header>
</body>
<script type="text/javascript" src="../../script/api.js"></script>
<script type="text/javascript" src="../../script/common.js"></script>
<script type="text/javascript">
apiready = function() {
   

    //聊天界面模块
    var UIChatTools = api.require('UIChatTools');
        UIChatTools.open({
            chatBox: {
                placeholder: '聊天内容',     
                autoFocuse: true,  
                maxRows: 6     
            },
            styles: {
                bgColor: '#D1D1D1',   
                margin: 10,           
            },
            tools: {
                h: 35,          
                iconSize: 30,   
                recorder: {     
                   normal: 'fs://UIChatTolls/recorder.png',  
                   selected: 'fs://UIChatTolls/recorder1.png' 
                },
                image: {        
                   normal: 'fs://UIChatTolls/image.png',  
                   selected: 'fs://UIChatTolls/image1.png' 
                },
                video: {        
                   normal: 'fs://UIChatTolls/video.png',  
                   selected: 'fs://UIChatTolls/video1.png' 
                },
                face: {         
                   normal: 'fs://UIChatTolls/face2.png',  
                   selected: 'fs://UIChatTolls/face1.png' 
                },
                append: {       
                   normal: 'fs://UIChatTolls/append.png',  
                   selected: 'fs://UIChatTolls/append1.png'
                }
            },
            // 表情
            // emotions:['widget://image/chatPage/emoticons/basic','widget://image/chatPage/emoticons/append1','widget://image/chatPage/emoticons/append2']
        }, function(ret) {
            if (ret) {
                if (ret.eventType === 'send') {
                  // alert(JSON.stringify(ret.msg));
                  rong.sendTextMessage({
                      conversationType: 'PRIVATE',
                      targetId: 'testUser2',
                      text: ret.msg,
                      extra: ''
                  }, function(ret, err) {
                      if (ret.status == 'prepare')
                          // api.toast({ msg: JSON.stringify(ret.result.message) });
                        api.alert({
                            title: 'title',
                            msg: '第一个prepare:' + JSON.stringify(ret.result.message),
                        }, function(ret, err) {
                            
                        });
                      else if (ret.status == 'success')
                          // api.toast({ msg: ret.result.message.messageId });
                          api.alert({
                              title: 'title',
                              msg: '第二个message' + ret.result.message.messageId,
                          }, function(ret, err) {
                              if (ret) {
                                  alert('第二成功'+JSON.stringify(ret));
                              } else {
                                  alert(JSON.stringify(err));
                              }
                          });
                      else if (ret.status == 'error')
                          // api.toast({ msg: err.code });
                          api.alert({
                              title: 'title',
                              msg: '第三个message' + err.code,
                          }, function(ret, err) {
                              if (ret) {
                                  alert(JSON.stringify(ret));
                              } else {
                                  alert(JSON.stringify(err));
                              }
                          });
                  });
                }
            } 
        });
        // 附加按钮
        UIChatTools.setAppendButton({
            styles: {
                row: 2,         
                column: 4,         
                iconSize: 50,      
                titleSize: 13,   
                titleColor: '#f00'     
            },
            buttons: [
               {
                    normal: 'widget://image/chatPage/album2.png',       
                    highlight: 'widget://image/chatPage/album2.png',    
                    title: '电话'       
               },{
                    normal: 'widget://image/chatPage/album2.png',       
                    highlight: 'widget://image/chatPage/album2.png',    
                    title: '收藏' 
               },{
                    normal: 'widget://image/chatPage/album2.png',       
                    highlight: 'widget://image/chatPage/album2.png',    
                    title: '发红包' 
               }
            ]
        }, function(ret) {
           api.alert({msg:'点击了第'+ret.index+'个按钮'});
        });
        // 监听功能按钮
        var UIChatTools = api.require('UIChatTools');
            UIChatTools.toolsListener(function(ret) {
               if (ret.eventType == 'video') {
                  api.alert({
                      title: 'title',
                      msg: 'video',
                  }, function(ret, err) {
                      if (ret) {
                          alert(JSON.stringify(ret));
                      } else {
                          alert(JSON.stringify(err));
                      }
                  });
               }
            });
        // 获取输入框的值
       
    var rong = api.require('rongCloud2');
    rong.init(function(ret, err) {
        if (ret.status == 'error')
            api.toast({ msg: err.code });
    });
    rong.setOnReceiveMessageListener(function(ret, err) {
      api.toast({ msg: JSON.stringify(ret.result.message) });
      api.toast({ msg: ret.result.message.left });
    })
    rong.connect(
        { 
            token: 'aAoW4oalHGpvB6Hw89bG0XzZSHvx/Xm6zmi6cWDa3L4VyfNcz/KXDFQxtpoQ+os1nT0799sMXlXPvUAK3FnjIY94cnJzE+aT'
        },function(ret, err) { 
            if (ret.status == 'success') api.toast({ msg: ret.result.userId }); 
        });

     // 获取参数
    var name = api.pageParam.name;
    var title = document.getElementById('title')
    $api.html(title, name);
    fnInit();
};
</script>

</html>
 -->