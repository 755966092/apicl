<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"
    />
    <title>title</title>
    <link rel="stylesheet" type="text/css" href="../../css/api.css" />
    <link rel="stylesheet" type="text/css" href="../../css/weui.css" />
    <style>
        .weui-media-box_appmsg .weui-media-box__hd {
            margin-right: 0.2rem;
            font-size: 0;
            line-height: 0;
            flex-wrap: wrap;
            align-content:center;
        }
        a.weui-media-box {
            background-color: #ffffff
        }
        .weui-media-box {
            padding-top: 0.15rem;
            padding-bottom: 0.15rem;
        }
        .weui-media-box_appmsg .weui-media-box__hd {
            width: .94rem;
            height: 0.94rem;
            background-color: #dddee0
        }

        img {
            margin-right: .04rem;
            margin-bottom: 0.04rem;
        }

        .item4 img {
            margin-right: .06rem;
            margin-bottom: 0.06rem;
        }

        .item3 img:nth-child(3n),
        .item4 img:nth-child(2n) {
            margin-right: 0;
        }

        .item4 img:nth-child(n+3) {
            margin-bottom: 0;
        }
        .item3 img:nth-child(n+4) {
            margin-bottom: 0;
        }
        .item3 img:nth-child(n+7) {
            margin-top: 0.04rem;
        }

        .group-count {
            line-height: 1rem;
            color: #999;
            text-align: center;
            font-size: 0.3rem;
        }
    </style>
</head>

<body>
    <div class="weui-panel__bd resultList">
        <!-- <a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg">
            <div class="weui-media-box__hd flex-def flex-zCenter flex-cCenter item3">
                <img class="weui-media-box__thumb" style="width:.27rem;height:.27rem" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAMAAAAOusbgAAAAeFBMVEUAwAD///+U5ZTc9twOww7G8MYwzDCH4YcfyR9x23Hw+/DY9dhm2WZG0kbT9NP0/PTL8sux7LFe115T1VM+zz7i+OIXxhes6qxr2mvA8MCe6J6M4oz6/frr+us5zjn2/fa67rqB4IF13XWn6ad83nxa1loqyirn+eccHxx4AAAC/klEQVRo3u2W2ZKiQBBF8wpCNSCyLwri7v//4bRIFVXoTBBB+DAReV5sG6lTXDITiGEYhmEYhmEYhmEYhmEY5v9i5fsZGRx9PyGDne8f6K9cfd+mKXe1yNG/0CcqYE86AkBMBh66f20deBc7wA/1WFiTwvSEpBMA2JJOBsSLxe/4QEEaJRrASP8EVF8Q74GbmevKg0saa0B8QbwBdjRyADYxIhqxAZ++IKYtciPXLQVG+imw+oo4Bu56rjEJ4GYsvPmKOAB+xlz7L5aevqUXuePWVhvWJ4eWiwUQ67mK51qPj4dFDMlRLBZTqF3SDvmr4BwtkECu5gHWPkmDfQh02WLxXuvbvC8ku8F57GsI5e0CmUwLz1kq3kD17R1In5816rGvQ5VMk5FEtIiWislTffuDpl/k/PzscdQsv8r9qWq4LRWX6tQYtTxvI3XyrwdyQxChXioOngH3dLgOFjk0all56XRi/wDFQrGQU3Os5t0wJu1GNtNKHdPqYaGYQuRDfbfDf26AGLYSyGS3ZAK4S8XuoAlxGSdYMKwqZKM9XJMtyqXi7HX/CiAZS6d8bSVUz5J36mEMFDTlAFQzxOT1dzLRljjB6+++ejFqka+mXIe6F59mw22OuOw1F4T6lg/9VjL1rLDoI9Xzl1MSYDNHnPQnt3D1EE7PrXjye/3pVpr1Z45hMUdcACc5NVQI0bOdS1WA0wuz73e7/5TNqBPhQXPEFGJNV2zNqWI7QKBd2Gn6AiBko02zuAOXeWIXjV0jNqdKegaE/kJQ6Bfs4aju04lMLkA2T5wBSYPKDGF3RKhFYEa6A1L1LG2yacmsaZ6YPOSAMKNsO+N5dNTfkc5Aqe26uxHpx7ZirvgCwJpWq/lmX1hA7LyabQ34tt5RiJKXSwQ+0KU0V5xg+hZrd4Bn1n4EID+WkQdgLfRNtvil9SPfwy+WQ7PFBWQz6dGWZBLkeJFXZGCfLUjCgGgqXo5TuSu3cugdcTv/HjqnBTEMwzAMwzAMwzAMwzAMw/zf/AFbXiOA6frlMAAAAABJRU5ErkJggg=="
                    alt="">
            </div>
            <div class="weui-media-box__bd">
                <h4 class="weui-media-box__title">标题一</h4>
            </div>
        </a>
        <a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg">
            <div class="weui-media-box__hd flex-def flex-zCenter flex-cCenter item4">
                <img class="weui-media-box__thumb" style="width:.4rem;height:.4rem" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAMAAAAOusbgAAAAeFBMVEUAwAD///+U5ZTc9twOww7G8MYwzDCH4YcfyR9x23Hw+/DY9dhm2WZG0kbT9NP0/PTL8sux7LFe115T1VM+zz7i+OIXxhes6qxr2mvA8MCe6J6M4oz6/frr+us5zjn2/fa67rqB4IF13XWn6ad83nxa1loqyirn+eccHxx4AAAC/klEQVRo3u2W2ZKiQBBF8wpCNSCyLwri7v//4bRIFVXoTBBB+DAReV5sG6lTXDITiGEYhmEYhmEYhmEYhmEY5v9i5fsZGRx9PyGDne8f6K9cfd+mKXe1yNG/0CcqYE86AkBMBh66f20deBc7wA/1WFiTwvSEpBMA2JJOBsSLxe/4QEEaJRrASP8EVF8Q74GbmevKg0saa0B8QbwBdjRyADYxIhqxAZ++IKYtciPXLQVG+imw+oo4Bu56rjEJ4GYsvPmKOAB+xlz7L5aevqUXuePWVhvWJ4eWiwUQ67mK51qPj4dFDMlRLBZTqF3SDvmr4BwtkECu5gHWPkmDfQh02WLxXuvbvC8ku8F57GsI5e0CmUwLz1kq3kD17R1In5816rGvQ5VMk5FEtIiWislTffuDpl/k/PzscdQsv8r9qWq4LRWX6tQYtTxvI3XyrwdyQxChXioOngH3dLgOFjk0all56XRi/wDFQrGQU3Os5t0wJu1GNtNKHdPqYaGYQuRDfbfDf26AGLYSyGS3ZAK4S8XuoAlxGSdYMKwqZKM9XJMtyqXi7HX/CiAZS6d8bSVUz5J36mEMFDTlAFQzxOT1dzLRljjB6+++ejFqka+mXIe6F59mw22OuOw1F4T6lg/9VjL1rLDoI9Xzl1MSYDNHnPQnt3D1EE7PrXjye/3pVpr1Z45hMUdcACc5NVQI0bOdS1WA0wuz73e7/5TNqBPhQXPEFGJNV2zNqWI7QKBd2Gn6AiBko02zuAOXeWIXjV0jNqdKegaE/kJQ6Bfs4aju04lMLkA2T5wBSYPKDGF3RKhFYEa6A1L1LG2yacmsaZ6YPOSAMKNsO+N5dNTfkc5Aqe26uxHpx7ZirvgCwJpWq/lmX1hA7LyabQ34tt5RiJKXSwQ+0KU0V5xg+hZrd4Bn1n4EID+WkQdgLfRNtvil9SPfwy+WQ7PFBWQz6dGWZBLkeJFXZGCfLUjCgGgqXo5TuSu3cugdcTv/HjqnBTEMwzAMwzAMwzAMwzAMw/zf/AFbXiOA6frlMAAAAABJRU5ErkJggg=="
                    alt="">
            </div>
            <div class="weui-media-box__bd">
                <h4 class="weui-media-box__title">标题一</h4>
            </div>
        </a> -->
    </div>
    <script type="text/x-dot-template" id="listT">
        {{~it :value}}
            {{?value.group_images.length<=4}}
                <a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg" data-id="{{=value.group_id}}" tapmode onclick="openGroupChat(this)">
                    <div class="weui-media-box__hd flex-def flex-zCenter flex-cCenter item4">
                        {{~value.group_images :item}}
                        <img class="weui-media-box__thumb" style="width:.4rem;height:.4rem" src="{{=item}}" alt="">
                        {{~}}
                    </div>
                    <div class="weui-media-box__bd">
                        <h4 class="weui-media-box__title">{{=value.group_name}}</h4>
                    </div>
                </a>
            {{??}}
                 <a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg" data-id="{{=value.group_id}}" tapmode onclick="openGroupChat(this)">
                    <div class="weui-media-box__hd flex-def flex-zCenter flex-cCenter item3">
                        {{~value.group_images :item}}
                        <img class="weui-media-box__thumb" style="width:.27rem;height:.27rem" src="{{=item}}" alt="">
                        {{~}}
                    </div>
                    <div class="weui-media-box__bd">
                        <h4 class="weui-media-box__title">{{=value.group_name}}</h4>
                    </div>
                </a>
            {{?}}
        {{~}}
        <p class="group-count">{{=it.length}}个群聊</p>
    </script>
</body>
<script type="text/javascript" src="../../script/api.js"></script>
<script type="text/javascript" src="../../script/common.js"></script>
<script type="text/javascript" src="../../script/doT.min.js"></script>
<script type="text/javascript">
    apiready = function () {
        requireData();
    };
    // 获取信息
    function requireData() {
        api.ajax({
            url: apiSite + '/chat_group/userGroupList',
            method: 'post',
            headers: apiHeader,
            data: {
                values: {
                    token: $api.getStorage('userToken'),
                }
            }
        }, function (ret, err) {
            if (ret) {
                if (ret.code === 200) {
                    for (var i = 0; i < ret.data.list.length; i++) {
                        ret.data.list[i].group_images = eval(ret.data.list[i].group_images);
                        
                    }
                    getData(ret.data.list)
                } else {
                    alert(ret.msg)
                }
            } else {
                alert(JSON.stringify(err))
            }
        })
    }

    // 打开聊天
    function openGroupChat(ele) {
        var id = $api.attr(ele, 'data-id');
        api.openWin({
            name: 'groupChat_win',
            url: '../news/groupChat_win.html',
            bounces: false,
            pageParam: {
                group_id: id}
        });
    }
</script>

</html>