<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"><meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <title>title</title>
    <link rel="stylesheet" type="text/css" href="../../css/api.css"/>
    <style>
        body,html{
            background-color: rgba(0,0,0,0.1);
            width: 100%;
            height: 100%;
        }
        body {
            display: -webkit-box; 
            display: flex; 
            -webkit-box-direction: normal;
            -webkit-box-orient: vertical;
            flex-direction: column;
            -webkit-box-align:  end;
            align-items: flex-end;
        }
        header.header {
            background-color: transparent;
        }
        .main {
            float: right;
            width: 6rem;
            background-color: #fff;
           -webkit-box-flex: 1.0;
            flex-grow: 1;


            padding-top: .42rem;
            padding-left: .55rem;
            box-sizing: border-box;
        }
        .relation {
            font-size: 0;
            width: 100%;

        }
        .relation .title {
            font-size: .24rem;
            color: #555;
            line-height: .33rem;
        }
        .relation .list {
            font-size: 0;
        }
        .relation .item:first-child {
            border-top: 1px solid #d9d9d9;
            margin-top: .17rem;
        }
        .relation .item {
            padding-right: .37rem;
            box-sizing: border-box;
            display: inline-block;
            height: .68rem;
            line-height: .68rem;
            border-bottom: 1px solid #d9d9d9;
            font-size: .24rem;
            width: 100%;
        }
        .relation .item>span {
            color: #777;
        }
        .sel>div {
            background: url(../../image/icon_my/icon_enter.png)no-repeat;
            background-position: right center;
            -webkit-background-size: .44rem .33rem;
            background-size: .44rem .33rem;
        }

          .main ul.no2 {
            font-size: .24rem;
            margin-top: .37rem;

        }
        .main ul.no2 p {
            line-height: .68rem;
            color: #555;
            /*border-bottom: 1px solid #cbcbcb;*/
        }
        .main ul.no2 li {
            
            /*height: .84rem;*/
            line-height: .68rem;
            border-top: 1px solid #CBCBCB;
            font-size: 0;
        }
        .main ul.no2 li p {
            font-size: .24rem;
            color: #333;
        }
        .main ul.no2 li span{
            border-radius: .08rem;
            float: left;
            width: 1.5rem;
            height: .68rem;
            font-size: .24rem;
            background-color: #F4F4F4;
            text-align: center;
            line-height: .68rem;
            padding: 0 .14rem ;
            box-sizing: border-box;
            margin: .15rem .1rem;
            display: none;
            white-space:nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .main ul.no2 li.sel span {
            display: inline-block;
        }
        .main ul.no2 li:last-child {
            border-bottom: 1px solid #cbcbcb;
        }

        .spanSel {
            background: url(../../image/icon_supply/icon_text4.png)no-repeat;
            background-position: right center;
            background-size: 1.5rem .71rem; 
            color: #27B24A;
        }
        .main ul.no2 li span.no2Icon {
            display: inline-block;
            width: .25rem;
            margin: 0;
            background: url(../../image/icon_txl/icon_arrow.png)no-repeat;
            -webkit-background-size: .25rem .15rem;
            background-size: .25rem .15rem;
            background-position: 0 center;
            float: right;
            margin-right: .37rem;

        }
        .main ul.no2 li span.no2Icon2 {
             background: url(../../image/icon_txl/icon_arrow02.png)no-repeat;
            -webkit-background-size: .25rem .15rem;
            background-size: .25rem .15rem;
            background-position: 0 center;
        }
        .footer {
            width: 6rem;
            height: .98rem;
            background-color: #F8F8F8;
            font-size: 0;
        }
        .footer span{
            width: 50%;
            text-align: center;
            line-height: .98rem;
            font-size: .34rem;
        }
        .footer span:last-child {
            background-color: #27B24A;
            color: #fff;
        }
    </style>
</head>
<body tapmode="hover" onclick="api.closeFrame();">
    <header class="header"></header>
    <div class="main" tapmode="hover" onclick="event.stopPropagation();">
        <div class="relation">
            <p class="title">关系</p>
            <div class="list">
                <div tapmode="hover" data-type='2' onclick="li_span(this);event.cancelBubble=true;" class="item sel"><div class="wrap">熟识好友<span>(双向通讯录)</span></div></div>
                <div tapmode="hover" data-type='1' onclick="li_span(this);event.cancelBubble=true;" class="item"><div class="wrap">相识好友<span>(单向通讯录)</span></div></div>
                <div tapmode="hover" data-type='3' onclick="li_span(this);event.cancelBubble=true;" class="item"><div class="wrap">尚未加入<span>(有通讯录)</span></div></div>
            </div>
        </div>
        <ul class="no2">
            <p>分类</p>
            <li class="no2List  sel clearfix"   tapmode="hover"   onclick="li_span(this);event.cancelBubble=true;" >
                <p>学校<span class="no2Icon no2Icon2"></span></p>
                <span   tapmode="hover"   onclick="selfAdaption(this)" class="no2_li_Span spanSel">全部</span>
                <span   tapmode="hover"   onclick="selfAdaption(this)" class="no2_li_Span">摄影</span>
                <span   tapmode="hover"   onclick="selfAdaption(this)" class="no2_li_Span">医疗</span>
                <span   tapmode="hover"   onclick="selfAdaption(this)" class="no2_li_Span">医疗</span>
                <span   tapmode="hover"   onclick="selfAdaption(this)" class="no2_li_Span">医疗</span>
                <span   tapmode="hover"   onclick="selfAdaption(this)" class="no2_li_Span">教育</span>
            </li>
            <li class="no2List clearfix"   tapmode="hover"   onclick="li_span(this);event.cancelBubble=true;">
                <p>公司<span class="no2Icon"></span></p>
                <span   tapmode="hover"   onclick="selfAdaption(this)" class="no2_li_Span spanSel">全部</span>
                <span   tapmode="hover"   onclick="selfAdaption(this)" class="no2_li_Span">摄影摄</span>
                <span   tapmode="hover"   onclick="selfAdaption(this)" class="no2_li_Span">摄影摄</span>
                <span   tapmode="hover"   onclick="selfAdaption(this)" class="no2_li_Span">摄影摄</span>
                <span   tapmode="hover"   onclick="selfAdaption(this)" class="no2_li_Span">医疗</span>
                <span   tapmode="hover"   onclick="selfAdaption(this)" class="no2_li_Span">教育</span>
            </li>
            <li class="no2List clearfix"   tapmode="hover"   onclick="li_span(this);event.cancelBubble=true;">
                <p>行业<span class="no2Icon"></span></p>
                <span   tapmode="hover"   onclick="selfAdaption(this)" class="no2_li_Span spanSel">全部</span>
                <span   tapmode="hover"   onclick="selfAdaption(this)" class="no2_li_Span">摄影摄影摄影</span>
                <span   tapmode="hover"   onclick="selfAdaption(this)" class="no2_li_Span">摄影摄影摄影</span>
                <span   tapmode="hover"   onclick="selfAdaption(this)" class="no2_li_Span">摄影摄影摄影</span>
                <span   tapmode="hover"   onclick="selfAdaption(this)" class="no2_li_Span">医疗</span>
                <span   tapmode="hover"   onclick="selfAdaption(this)" class="no2_li_Span">教育</span>
            </li>
            <li class="no2List clearfix"   tapmode="hover"   onclick="li_span(this);event.cancelBubble=true;">
                <p>地点<span class="no2Icon"></span></p>
                <span   tapmode="hover"   onclick="selfAdaption(this)" class="no2_li_Span spanSel">全部</span>
                <span   tapmode="hover"   onclick="selfAdaption(this)" class="no2_li_Span">摄影</span>
                <span   tapmode="hover"   onclick="selfAdaption(this)" class="no2_li_Span">医疗</span>
                <span   tapmode="hover"   onclick="selfAdaption(this)" class="no2_li_Span">教育</span>
            </li>
            <li class="no2List clearfix"   tapmode="hover"   onclick="li_span(this);event.cancelBubble=true;">
                <p>自定义<span class="no2Icon"></span></p>
                <span   tapmode="hover"   onclick="selfAdaption(this)" class="no2_li_Span spanSel">全部</span>
                <span   tapmode="hover"   onclick="selfAdaption(this)" class="no2_li_Span">摄影</span>
                <span   tapmode="hover"   onclick="selfAdaption(this)" class="no2_li_Span">医疗</span>
                <span   tapmode="hover"   onclick="selfAdaption(this)" class="no2_li_Span">教育</span>
            </li>
        </ul>
                
    </div>
    <div class="footer" onclick="event.stopPropagation();">
        <span   tapmode="hover"   onclick="enter(0);event.stopPropagation();">重置</span>
        <span   tapmode="hover"   onclick="enter(1);event.stopPropagation();">确定</span>
    </div>
</body>
<script type="text/javascript" src="../../script/api.js"></script>
<script type="text/javascript" src="../../script/common.js"></script>
<script type="text/javascript">
    apiready = function(){
        fnInit();
    };
    // 选中图标
    function li_span(ele) {
        var allDom = ele.parentNode.childNodes
        var no2Icon = ele.parentNode.getElementsByClassName('no2Icon');
        for (var i = 0; i< no2Icon.length; i++) {
            $api.removeCls(no2Icon[i], 'no2Icon2');
        }
        $api.addCls(ele.getElementsByClassName('no2Icon')[0], 'no2Icon2');
        for (var i = 0; i < allDom.length; i++) {
            $api.removeCls(allDom[i], 'sel');
        }
        $api.addCls(ele, 'sel');
    }
    function selfAdaption(ele) {
        var allDom = ele.parentNode.getElementsByClassName("no2_li_Span")
        

        for (var i = 0; i < allDom.length; i++) {
            $api.removeCls(allDom[i], 'spanSel');
        }
        $api.addCls(ele, 'spanSel');
    }


    // 点击确定按钮： 1； 重置按钮 0
    function enter(n) {
        if (n) {
            var sel = $api.dom('.sel');
            var selVal = $api.attr(sel, 'data-type')
            
            // 发送事件, 刷新筛选结果
            api.sendEvent({
                name: 'screeningResultsType',
                extra: {
                    selVal: selVal 
                }
            });
            
             api.closeFrame();

        } else {
            var no1 = document.getElementsByClassName('list')[0]
            var liArr = no1.getElementsByTagName('div');
            for (var i = 0; i < liArr.length; i++) {
                $api.removeCls(liArr[i], 'sel');
            }  
            $api.addCls(liArr[0], 'sel');

            for (var i = 0; i < $api.domAll('li').length; i++) {
                $api.removeCls($api.domAll('li')[i], 'sel');
                var lispan = $api.domAll('li')[i].getElementsByClassName('no2_li_Span')
                for (var j = 0; j < lispan.length; j++) {
                   $api.removeCls(lispan[j], 'spanSel');
                }
                $api.addCls(lispan[0], 'spanSel');
            }
            $api.addCls($api.domAll('li')[0], 'sel');


            var lavelArr = $api.domAll('.no2Icon')
            for (var i = 0; i < lavelArr.length; i++) {
               $api.removeCls(lavelArr[i], 'no2Icon2');
            }
            $api.addCls(lavelArr[0], 'no2Icon2');
            // $api.addCls($api.domAll('li')[0], 'sel');
           
        }
    }
</script>
</html>