<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"><meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <title>title</title>
    <link rel="stylesheet" type="text/css" href="../../css/api.css"/>
    <style>

        .listContent {
            width: 7.5rem;
            padding-left: .35rem;
            background-color: #fff;
            box-sizing: border-box;
        }
        .wrap {
            height: 1.2rem;
            width: 100%;
            box-sizing: border-box;
            border-bottom: .01rem solid #ddd;
            padding-right: .35rem;
            font-size: 0;
        }


        .title {
            font-size: .3rem;
        }
        .money {
            font-size: .42rem;
            color: #333;
        }
        .time {
            font-size: .24rem;
            color: #999;
        }
        .rightText {
            text-align: right;
        }
        .listContent:last-child {
            border-bottom: .01rem solid #ddd;
        }
        .listContent:last-child .wrap {
            border-bottom: 0;
        }
        .nomain .icon {
            width: 2.2rem;
            height: 2.2rem;
            background: url(../../image/iocn_addressList/icon_noInfo.png)no-repeat;
            -webkit-background-size: 2.2rem 2.2rem;
            background-size: 2.2rem 2.2rem;
            margin: 0 auto;
        }
        .nomain {
            position: absolute;
            top: 0;bottom: 0;left: 0;right: 0;
            margin: auto;
        }
        .hide {
            display: none;
        }
        .nomain p {
            font-size: .3rem;
            color: #999;
            /*width: 3.9rem;*/
            margin: .36rem auto 0;
            text-align: center;
        }
        .nomain .jump {
            color: #999;
            font-size: 0.34rem;
        }
    </style>
</head>
<body>
    <div class="main resultList">

    </div>
      <script type="text/x-dot-template" id="listT">
        {{?it.length > 0}}
          {{ for (var i = 0; i < it.length; i++) { }}
            <div class="listContent">
              <div class="wrap flex-def flex-cCenter flex-zBetween">
                  <span class="title">{{=it[i].type}}</span>
                  <div class="rightText">
                      <p class="money">￥{{=it[i].money}}</p>
                      <p class="time">{{=it[i].create_time}}</p>
                  </div>
              </div>
            </div>
          {{}}}
        {{??}}
            <div class="nomain flex-def flex-cCenter flex-zCenter">
                <div class="wrap">
                        <div class="icon">
                    </div>
                        <p>空空如也 ~</p>
                        <!-- <p class="jump">试着换个关键词吧...</p> -->
                </div>
            </div>
        {{?}}

      </script>

</body>
<script type="text/javascript" src="../../script/api.js"></script>
<script type="text/javascript" src="../../script/common.js"></script>
<script type="text/javascript" src="../../script/doT.min.js"></script>
<script type="text/javascript">
    var type = ["提现","充值VIP","邀请收入","支付供应订单","供应订单补差价","供应订单优惠","供应订单收入","供应订单退款","支付求助订单","求助订单收入","求助订单退款","付费入群"]
    var page_num = 1,accountDetailObj=[];
    apiready = function(){
      requestData();
      api.addEventListener({
         name: 'scrolltobottom'
      }, function(ret, err) {
            requestData();
      });
    };
    function requestData() {
      api.ajax({
          url: apiSite + '/finance_center/accountDetail',
          method: 'post',
          headers: apiHeader,
          data: {
               values: {
                 token: $api.getStorage('userToken'),
                 page_num: page_num
               }
          }
      }, function(ret, err) {
        if(ret) {
          if (ret.code == 200) {
            // // // console.log('数量:'+ret.data.list.length)
            // // // console.log('页数:'+page_num)
            if (ret.data.list.length > 0) {
                page_num += 1;
                for (var i = 0; i < ret.data.list.length; i++) {
                  ret.data.list[i].type = type[ret.data.list[i].type-1]
                }
                accountDetailObj = accountDetailObj.concat(ret.data.list)
                getData(accountDetailObj)
            }
          }
        } else {
          alert(JSON.stringify(err.msg))
        }
      })
    }


    </script>
</html>