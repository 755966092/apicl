<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <title>title</title>
    <link rel="stylesheet" type="text/css" href="../../css/api.css"/>
   	<style type="text/css">
   		span {
   			font-size: .24rem;
   			padding: .1rem .2rem;
   		}
   		span:nth-child(1) {
   			border: 1px solid #f00;
   			float: left;
   			margin-right: .5rem;

   		}
   		span:nth-child(2) {
   			border: 1px solid #ff0;
   			float: right;
   			margin-left: .5rem;
   		}
   	</style>
</head>
<body>
    <span onclick="enter(0)">取消</span>
    <span onclick="enter(1)">确认</span>
</body>
<script type="text/javascript" src="../../script/api.js"></script>
<script type="text/javascript" src="../../script/common.js"></script>
<script type="text/javascript">
var selDate;
    apiready = function(){
	   dianji();
	  

    };
  
  function getData() {
        var data = [];
        // 添加年份
        var year = new Date().getFullYear();
        // console.log(year);
        for (var i = year; i > 1999; i--) {
            data.push({title:i})
        }
        // 添加月份
        for(var j= 0; j<data.length;j++) {
            data[j].contents = [];
            for (var q = 0; q<12;q++) {
                data[j].contents.push({title:q+1});
            }
        }
        // 添加日期
        for(var w= 0; w<data.length;w++) {
            for (var e = 0; e<12;e++) {
                // 1 3 5 7 8 10 12    31天
                var d = 31;
                data[w].contents[e].contents = [];
                // 4 6 9 11   30天
                if (e === 1) {
                    if (data[w].title % 4 === 0 && (data[w].title % 100 !== 0 || data[w].title % 400 === 0) ) {
                        d = 29
                    } else {
                        d = 28
                    }
                } else if (e === 3 || e === 5 || e === 8 || e === 10) {
                    d = 30;
                }
               
                for (var r = 0; r<d;r++) {
                    data[w].contents[e].contents.push(r+1)
                }
            }
        }
       return data;
    }
 function dianji() {
        
        var a = getData();

        var UISelector = api.require('UISelector');

        UISelector.open({
            rect: {
                x: 0,
                y: 30,
                // y: api.winHeight / 2 + 170,
                // w: api.frameWidth - 60,
                h: 150
            },
            styles: {
                bg: 'rgba(255,0,0,0.5)',
                text: {
                    size: 14,
                    selected: '#f00',
                    normal: '#000'
                },
                item: {
                    w: 80,
                    h: 20,
                    normal: 'rgba(0,0,0,0.3)',
                    selected: 'rgba(255,255,255,0)',
                    zoomIn: 1.5
                }
            },
            rows: 3,
            indexs: [3, 4, 5],
            bounce: false,
            fixedOn: api.frameName,
            fixed: false,
            data: a
        }, function(ret, err) {
            if (ret) {
                // alert(JSON.stringify(ret));
                selDate = JSON.stringify(ret);
            } else {
                alert(JSON.stringify(err));
            }
        });
   }  
  function enter (n) {
  	if (n) {
		alert(selDate);
  	} else {
  		api.closeFrame({
  		    // name: ''
  		});
  	}
  }
  
</script>
</html>