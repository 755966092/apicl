<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"><meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <title>title</title>
    <link rel="stylesheet" type="text/css" href="../../css/api.css"/>
    <link rel="stylesheet" type="text/css" href="../../css/flex.css"/>
   <style type="text/css">
        .companyInfo {
            height: 3.6rem;
            background: rgba(0, 0, 0, .3) url(../../image/icon_gs/bg_company.png)no-repeat;
            background-size: 100% 3.6rem;
            box-sizing: border-box;
            padding-top: 0.5rem;
        }
        .companyIcon {
            width: 1.08rem;
            height: 1.08rem;
            border-radius: .1rem;
        }
        h3 {
            color: #fff;
            font-size: 0.34rem;
            text-align: center;
            margin-top: 0.2rem;
        }
        .centerText {
            font-size: .24rem;
            line-height: .33rem;
            text-align: center;
        }
        .centerText .address {
            margin-top: .17rem;
            margin-bottom: .07rem;
            color: #fff;
        }
        .centerText .url {
            color: #fff;
            margin-bottom: .46rem;
        }
        .bottomBtn {
            position: relative;
            font-size: 0;
            width: 100%;
            height: .8rem;
            background-color: #fff;
        }
        .bottomBtn .left,.bottomBtn .center,.bottomBtn .right {
            width: 33%;font-size: 0;
            text-align: center;
            /*line-height: .44rem;*/
        }
        .bottomBtn .left .text,.bottomBtn .center .text,.bottomBtn .right .text {
            font-size: .28rem;
        }
        .center {
            border-right: .01rem solid #d9d9d9;
            border-left: .01rem solid #d9d9d9;
        }
        .icon {
            width: .42rem;
            height: .41rem;
            background: url(../../image/icon_my/icon_gdd.png)no-repeat;
            background-size: .42rem .41rem;
            vertical-align: bottom;
            margin-right: .1rem;
        }
        .icon2 {
            width: .48rem;
            height: .35rem;
            background: url(../../image/icon_my/icon_qdd.png)no-repeat;
            background-size: .48rem .35rem;
             vertical-align: bottom;
            margin-right: .1rem;
        }
        .icon3 {
            width: .44rem;
            height: .44rem;
            background: url(../../image/icon_txl/icon_yuang.png)no-repeat;
            background-size: .44rem .44rem;
             vertical-align: bottom;
            margin-right: .1rem;
        }
        .line {
            width: 1rem;
            height: .04rem;
            background-color: #0ABB07;
            position: absolute;
            bottom: 0rem;
            left: .75rem;
        }
        .img-wrap {
            text-align: center;
            font-size: 0;
        }
   </style>
</head>
<body>
    <div class="main">
            <div class="companyInfo">
                <div class="img-wrap" >
                    <img class="companyIcon" src="../../image/icon_gs/company_logo.png">
                </div>
              <h3></h3>
              <div class="centerText">
                  <p class="address"><span>未填写行业</span>·<span>未填写地址</span>·<span>1</span>人</p>
                  <p class="url"></p>
              </div>
            </div>
        <div class="bottomBtn flex-def flex-zCenter flex-cCenter">
            <div class="left" tapmode   onclick="switchApr(0)">
                <!-- <span class="icon"></span> -->
                <span class="text">供应</span>
            </div>
            <div class="center" tapmode   onclick="switchApr(1)">
                <!-- <span class="icon2"></span> -->
                <span class="text">需求</span>
            </div>
            <div class="right" tapmode   onclick="switchApr(2)">
                <!-- <span class="icon3"></span> -->
                <span class="text">员工</span>
            </div>
            <div class="line" id="indexbar"></div>
        </div>
    </div>
  
</body>
<script type="text/javascript" src="../../script/api.js"></script>
<script type="text/javascript" src="../../script/common.js"></script>
<script type="text/javascript">
    apiready = function(){
        openGroup();
        requireData();
    };
    // 请求数据
    function requireData(params) {
        api.ajax({
            url: apiSite + '/userCenter/workDetails',
            method: 'post',
            headers: apiHeader,
            data: {
                values: { 
                    token: $api.getStorage('userToken'),
                    statu: 1,
                    company_id: api.pageParam.companyId
                }
            }
        }, function(ret, err) {
            if(ret) {
                if (ret.code === 200) {
                    $api.text($api.dom('h3'), ret.data.list.name);
                    if (ret.data.list.image_url) {
                        $api.attr($api.dom('img'), 'src', ret.data.list.image_url);
                    }
                    $api.text($api.dom('.url'), ret.data.list.website);
                    $api.text($api.dom('.address'), (ret.data.list.industry_name || '未填写行业') + ' · ' + (ret.data.list.address || '未填写地址')+' · '+ (ret.data.list.size || 1 )+'人');
                } else {
                    alert(ret.msg)
                }
            } else {
                alert(JSON.stringify(err))
            }
        })
    }
    function openGroup() {
        api.openFrameGroup({
            name: 'me_gs_companyPage_frame',
            index: 0,
            rect: {
                 x: 0, 
                 y: $api.offset($api.dom('.main')).h + 10 + api.pageParam.headerH, 
                 w: 'auto',
                 h: 'auto'
            },
            scrollEnabled: true,
            frames: [{
                name: 'me_gs_companyPage_frame1', 
                url: './me_gs_companyPage_frame1.html',
                pageParam: {
                    companyId: api.pageParam.companyId
                }
            },{
                name: 'me_gs_companyPage_frame2', 
                url: './me_gs_companyPage_frame2.html',
                pageParam: {
                    companyId: api.pageParam.companyId
                }
            },{
                name: 'me_gs_companyPage_frame3', 
                url: './me_gs_companyPage_frame3.html',
                pageParam: {
                    companyId: api.pageParam.companyId,
                    startY: api.winHeight - api.pageParam.headerH - $api.offset($api.dom('.main')).h
                }
            }]
        }, function(ret, err) {
            if (ret) {
                // switchAprIndex(ret.index)
                sliderbarCallback('indexbar',ret.index)
            } else {
                alert(JSON.stringify(err.msg));
            }
        });
    }
    // 显示的页面
     function switchApr(index){
            api.setFrameGroupIndex ({
                name: 'me_gs_companyPage_frame',
                index: index,
                scroll: true
            });
            // switchAprIndex(index);
            sliderbarCallback('indexbar',index)
        }

    // 标题下面竖线
    function sliderbarCallback(id, num) {
        var width = parseInt($api.offset($api.dom('.companyInfo')).w  / 3);
        var move = num * width;
        // if (num == 2) {
        //     $api.css($api.dom('.line'), 'width:1rem');
        // }
        $api.css($api.byId(id),
                "-webkit-transform:translate(" + move + "px,0);-webkit-transition: 300ms;"
        );
    }
     // 切换头部的标题颜色
    function switchAprIndex(index){
        sliderbarCallback('indexbar',index)
        // var aprItems = $api.domAll('.head');
        // for (var i = 0; i < aprItems.length; i++) {
        //     $api.removeCls(aprItems[i], 'act');
        // }
        // $api.addCls(aprItems[index], 'act');
    }
</script>
</html>




