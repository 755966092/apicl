<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"><meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <title>title</title>
    <link rel="stylesheet" type="text/css" href="../../css/api.css"/>
    <style>

        header.header .winTitle {
            width: auto;
        }
        header.header .head_center {
            font-size: 0;
            line-height: .8rem;
            border-radius: .05rem;
            color: #999;
        }
       .select span{
           /* border-bottom: .05rem solid #0ABB07; */
           color: #0ABB07;
        }

         .search {
            width: .34rem;
            height: .35rem;
            /*margin-top: .23rem;*/
            padding-right: .2rem;
            /*margin-right: .2rem;*/
            border-right: .01rem solid #D4D4D4;
            background: url(../../image/icon_supply/icon_search.png)no-repeat;
            -webkit-background-size: .34rem .35rem;
            background-size: .34rem .35rem;
            background-position: 0 center;
        }

         .filter {
            width: .57rem;
            height: .3rem;
            background: url(../../image/icon_supply/icon_sx.png)no-repeat;
            -webkit-background-size: .34rem .3rem;
            background-size: .34rem .3rem;
            background-position: right center;
        }

        .nav {
            height: .7rem;
            font-size: 0;
            box-sizing: border-box;
            /*padding: 0 .25rem;*/

            background-color: #FCFCFD;
            color: #555;
            border-bottom: .01rem solid #E1E1DF;
        }
        .nav .head_center_left {
            font-size: .28rem;
            width: 50%;
            text-align: center;
            box-sizing: border-box;
            border-right: .01rem solid #D4D4D4;
        }
        .nav .head_center_left:last-child {
            border: 0;
        }
        .indexbar {
            background: url('../../image/tabLine.png') no-repeat center bottom;
            background-size: 63px auto;
            color: #27B24A;
            width: 25%;
            left: .95rem;
            bottom: 0;
            position: absolute;
            height: 2px;
        }
        .rightBtn {
             background: url(../../image/icon_supply/icon_sx1.png)no-repeat;
            -webkit-background-size: .34rem .3rem;
            background-size: .34rem .3rem;
            background-position: right center;
        }
    </style>


</head>
<body>

     <header  class="header">
        <div class="head">
            <span class="callback"   tapmode   onclick="api.closeWin()">返回</span>
            <span class="winTitle">求订单</span>
            <span class="rightBtn" tapmode onclick="openShadow()">
            </span>
           <!--  <span class="winTitle head_center">
                <span class=" head_center_left select"   tapmode   onclick="switchApr(0)">Ta求</span>
                <span class=" head_center_left "   tapmode   onclick="switchApr(1)">我求</span>
            </span>
            <span class="Filter flex-def flex-zEnd">
                <span class="wrap flex-def flex-cCenter">
                    <span class="search"></span>
                </span>
                <span class="wrap flex-def flex-cCenter" ontouchstart='openShadow()'>
                    <span  class="filter"></span>
                </span>
            </span>  -->
        </div>
        <div class="nav flex-def flex-cCenter">
           <!--  <span>
                <span class="search"></span>
            </span> -->
            <span class="flex-item">
                <span class=" head_center_left select"   tapmode   onclick="switchApr(0)"><span>Ta的需求</span></span>
                <span class=" head_center_left "   tapmode   onclick="switchApr(1)"><span>我的需求</span></span>
            </span>
            <div class="indexbar" id="indexbar"></div>
            <!-- <span class="rightFilterBtn" ontouchstart='openShadow()'>
                <span  class="filter"></span>
            </span> -->
        </div>
    </header>

</body>
<script type="text/javascript" src="../../script/api.js"></script>
<script type="text/javascript" src="../../script/common.js"></script>
<script type="text/javascript">
    var type='',status='',sub_type='';
    apiready = function(){
        fnInit();
        api.addEventListener({
            name: 'filterOrder'
        }, function(ret, err) {
            if (ret) {
                type = ret.value.type || '',
                status = ret.value.status || '',
                sub_type = ret.value.sub_type  || '';
            } else {
                alert(JSON.stringify(err.msg));
            }
        });

        openAprGroup(headerH);
    };



    // 打开frame组
    function openAprGroup (frameH){
        api.openFrameGroup({
            name: 'publishGroup1',
            rect: {
                 x: 0,
                 y: headerH,
                 w: 'auto',
                 h: 'auto'
            },
            scrollEnabled: true,
            index: 0,
            frames: [{
                name: 'me_qdd_ta',
                url: './me_qdd_ta.html',
                pageParam: {
                    headerH: headerH
                }
            },{
                name: 'me_qdd_wo',
                url: './me_qdd_wo.html',
                pageParam: {
                    headerH: headerH
                }
            }]
        }, function(ret, err) {
            if (ret) {
                switchAprIndex(ret.index)
            } else {
                alert(JSON.stringify(err.msg));
            }
        });
    }


    // 显示的页面
     function switchApr(index){
            api.setFrameGroupIndex ({
                name: 'publishGroup1',
                index: index,
                scroll: true
            });
            switchAprIndex(index);
        }
        // 标题下面竖线
    function sliderbarCallback(id, num) {
        var width = parseInt((api.frameWidth) / 2);
        // var width = parseInt(api.frameWidth / 2);
        var move = num * width;
        $api.css($api.byId(id),
                "-webkit-transform:translate(" + move + "px,0);-webkit-transition: 300ms;"
        );
    }
     // 切换头部的标题颜色
    function switchAprIndex(index){
        sliderbarCallback('indexbar',index)
        var aprItems = $api.domAll('.head_center_left');
        for (var i = 0; i < aprItems.length; i++) {
            $api.removeCls(aprItems[i], 'select');
        }
        $api.addCls(aprItems[index], 'select');
    }

    function openShadow() {
        api.openFrame({
            name: 'me_qdd_shadow',
            url: './me_qdd_shadow.html',
            rect: {
                x: 0,
                y: headerH,
                w: api.winWidth,
                h: api.winHeight-headerH
            },
            pageParam: {
                type: type,
                status: status,
                sub_type: sub_type
            },
            bounces: false
        });
    }
</script>
</html>