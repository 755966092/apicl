<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
    <title>title</title>
    <link rel="stylesheet" type="text/css" href="../../css/api.css" />
    <link rel="stylesheet" type="text/css" href="../../css/weui.css" />
    <style>
        .btn {
            padding: 0 .36rem;;
        }
        .loading {
            width: 100%;
            height: 13.34rem;
            background: rgba(0, 0, 0, 0.3) url(../../image/loading_more.gif)no-repeat;
            -webkit-background-size: .8rem .8rem;
            background-size: .8rem .8rem;
            background-position: center center;
            display: none;
        }
        .mt20 {
            margin-top: 0.36rem;
        }
    </style>
</head>

<body>
    <header class="header">
        <div class="head">
            <span class="callback" tapmode onclick="api.closeWin()">返回</span>
            <span class="winTitle">
                资料权限
            </span>
        </div>
    </header>
    <div class="weui-cells weui-cells_radio mt20" >
        <label class="weui-cell weui-check__label" for="allFriend" tapmode onclick="selEnter(this)">
            <div class="weui-cell__bd">
                <p>全部好友</p>
            </div>
            <div class="weui-cell__ft">
                <input type="radio" class="weui-check" name="radio1" id="allFriend" >
                <span class="weui-icon-checked"></span>
            </div>
        </label>
        <label class="weui-cell weui-check__label" for="firstContact" tapmode onclick="selEnter(this)">
            <div class="weui-cell__bd">
                <p>一度以内好友</p>
            </div>
            <div class="weui-cell__ft">
                <input type="radio" name="radio1" class="weui-check" id="firstContact" checked="checked">
                <span class="weui-icon-checked"></span>
            </div>
        </label>
        <label class="weui-cell weui-check__label" for="secondContact" tapmode onclick="selEnter(this)">
            <div class="weui-cell__bd">
                <p>二度以内好友</p>
            </div>
            <div class="weui-cell__ft">
                <input type="radio" name="radio1" class="weui-check" id="secondContact" >
                <span class="weui-icon-checked"></span>
            </div>
        </label>
        <label class="weui-cell weui-check__label" for="thirdfirstContact" tapmode onclick="selEnter(this)">
            <div class="weui-cell__bd">
                <p>三度以内好友</p>
            </div>
            <div class="weui-cell__ft">
                <input type="radio" name="radio1" class="weui-check" id="thirdfirstContact" >
                <span class="weui-icon-checked"></span>
            </div>
        </label>
    </div>
</body>
<script type="text/javascript" src="../../script/api.js"></script>
<script type="text/javascript" src="../../script/common.js"></script>
<script>
    apiready = function(){
        fnInit();
        initPage();
    }
    // 初始化页面
    function initPage() {
        var label = document.getElementsByTagName('label');
        for (var i = 0; i < label.length; i++) {
            var element = label[i];
            var ipt = element.getElementsByTagName('input')[0];
            // $api.removeAttr($api.dom(element, 'input'), 'checked');
            ipt.removeAttribute('checked');
            // if ($api.text($api.dom(element, 'p')) === api.pageParam.text) {
            if (element.getElementsByTagName('p')[0].innerText === api.pageParam.text) {
                // $api.attr($api.dom(element, 'input'), 'checked', 'checked');
                ipt.setAttribute('checked', 'checked')
            }
        }
    }
    // 选择
    function selEnter(ele) {
        var val = ele.getAttribute('for');
        var text = $api.text($api.dom(ele, 'p'));
        api.sendEvent({
            name: 'whoCanSeeMe',
            extra: {
                val: val,
                text: text
            }
        });
        setTimeout(function() {
            api.closeWin();
        }, 500);
    }
</script>

</html>