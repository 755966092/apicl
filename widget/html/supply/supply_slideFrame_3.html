<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"><meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <title>title</title>
    <link rel="stylesheet" type="text/css" href="../../css/api.css"/>
    <style>
        html,body {
            height: 100%;
            width: 100%;    
            background-color: rgba(0,0,0,0.4);
        }

        body {
            
          

        }
        .warp1 {
            height: 100%;
             display: -webkit-box; 
            display: flex; 
            -webkit-box-direction: normal;
            -webkit-box-orient: vertical;
            flex-direction: column;
            -webkit-box-align:  end;
            align-items: flex-end;
        }
        .warp {
            margin-left: 1.5rem;
            background-color: #fff;
        }
        .main {
            background-color: #fff;
            position: relative;
            height: 100%;
            box-sizing: border-box;
        }
        .main>div:first-child {
            padding: .15rem .2rem;
            padding-right: 0;
        }

        .main ul.no1 {
            font-size: .24rem;
            width: 100%;
        }
        .main ul.no1 li {

            font-size: 0;
            margin-bottom: .1rem;
        }
        .main ul.no1 li:last-child {
            margin-bottom: 0;
        }
        .main ul.no1 li p {
            font-size: .24rem;
            color: #9b9b9b;
        }
        .main ul.no1 li span {
            font-size: .24rem;
            display: inline-block;
            margin-top: .1rem;
            width: 1.78rem;
            height: .79rem;
            background-color: #F4F4F4;
            border-radius: .06rem;
            text-align: center;
            line-height: .79rem;
            color: #555;
            margin-bottom: .2rem;
        }
        .main ul.no1 li span:nth-child(2), 
        .main ul.no1 li span:nth-child(3) {
            margin-right: .12rem;
        }
        .main ul.no1 li span.sel {
            background: url(../../image/icon_supply/icon_text4.png);
            background-size: .96rem .6rem;
            color: #27B24A;
        }
       
        .main ul.no1 li span.li_span4 {
            background-size: 1.78rem .79rem;
            width: 1.78rem;
        }
          .main ul.no2 {
            font-size: .24rem;
            /*margin-top: .37rem;*/

        }
        .main ul.no2 p {
            line-height: .79rem;
            color: #555;
            /*border-bottom: 1px solid #cbcbcb;*/
        }
        .main ul.no2 li {
            
            /*height: .84rem;*/
            line-height: .79rem;
            border-top: 1px solid #CBCBCB;
            font-size: 0;
        }
        .main ul.no2 li p {
            font-size: .24rem;
            color: #333;
        }
        .main ul.no2 li span{
            border-radius: .08rem;
            float: left;
            width: 1.78rem;
            height: .79rem;
            font-size: .24rem;
            background-color: #F4F4F4;
            text-align: center;
            line-height: .68rem;
            /*padding: 0 .14rem ;*/
            box-sizing: border-box;
            /*margin: .15rem .1rem;*/
            margin-top: .1rem;
            margin-bottom: .1rem;
            margin-right: .12rem;
            display: none;
            white-space:nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .main ul.no2 li span.no {
            margin-right: 0;
        }
        .main ul.no2 li.sel span {
            display: inline-block;
        }

        .main ul.no2 li.sel span.hide {
            display: none;
        }.main ul.no2 li.sel span.show {
            display: inline-block;
        }
        .main ul.no2 li:last-child {
            border-bottom: 1px solid #cbcbcb;
        }

        .spanSel {
            background: url(../../image/icon_supply/icon_text4.png)no-repeat;
            background-position: right center;
            background-size: 1.5rem .71rem; 
            color: #27B24A;
        }
        .main ul.no2 li span.no2Icon {
            display: inline-block;
            width: .25rem;
            margin: 0;
            background: url(../../image/icon_txl/icon_arrow.png)no-repeat;
            -webkit-background-size: .25rem .15rem;
            background-size: .25rem .15rem;
            background-position: 0 center;
            float: right;
            margin-right: .37rem;

        }
        .main ul.no2 li span.no2Icon2 {
             background: url(../../image/icon_txl/icon_arrow02.png)no-repeat;
            -webkit-background-size: .25rem .15rem;
            background-size: .25rem .15rem;
            background-position: 0 center;
        }
        .footer {
            height: .98rem;
            width: 6rem;
            font-size: 0;
        }
        .footer span {
            height: .98rem;
            width: 3rem;    
            font-size: .34rem;
            text-align: center;
            line-height: .98rem;
            float: left;
            background-color: #F8F8F8;
        }
        .footer span:last-child {
            background-color: #27B24A;
            color: #fff;
        }
        
        header.header {
            opacity: 0;
        }
    </style>
</head>
<body   tapmode="hover" class=""   onclick="api.closeFrame()">
   
    <div class="warp1 flex-def flex-zBetween">
         <header  class="header clearfix">
            <div class="head">
                <span class="callback"   tapmode="hover"   onclick="api.closeWin()">返回</span>
                <span class="winTitle">
                    找供求
                </span>
            </div>
        </header>
        <div class="warp flex-item"   tapmode="hover"   onclick="api.closeFrame()">
            <div class="main"   tapmode="hover"   onclick="event.cancelBubble=true;">
                <div>
                    <ul class="no1">
                        <li>
                             <p>排序</p>
                             <span   tapmode="hover"   onclick="li_span(this);event.cancelBubble=true;" class="li_span li_span4 sel">供</span>
                             <span   tapmode="hover"   onclick="li_span(this);event.cancelBubble=true;" class="li_span li_span4">求</span>
                        </li>
                        
                        <li>
                             <p>排序</p>
                             <span   tapmode="hover"   onclick="li_span(this);event.cancelBubble=true;" class="li_span li_span4 sel">全部</span>
                             <span   tapmode="hover"   onclick="li_span(this);event.cancelBubble=true;" class="li_span li_span4">距离最近</span>
                             <span   tapmode="hover"   onclick="li_span(this);event.cancelBubble=true;" class="li_span li_span4">价格最低</span>
                             <span   tapmode="hover"   onclick="li_span(this);event.cancelBubble=true;" class="li_span li_span4">最新发布</span>
                        </li>
                     </ul>  
                    <ul class="no2">
                        <p>分类</p>
                        <li class="no2List sel clearfix"   tapmode="hover"   onclick="li_spanP(this);event.cancelBubble=true;" >
                            <p>TA自产自销的<span class="no2Icon no2Icon2"></span></p>
                            <span   tapmode="hover"   onclick="selfAdaption(this);event.cancelBubble=true;" class="no2_li_Span spanSel">全部</span>
                            <span   tapmode="hover"   onclick="selfAdaption(this);event.cancelBubble=true;" class="no2_li_Span">摄影</span>
                            <span   tapmode="hover"   onclick="selfAdaption(this);event.cancelBubble=true;" class="no no2_li_Span">医疗</span>
                            <span   tapmode="hover"   onclick="selfAdaption(this);event.cancelBubble=true;" class="no2_li_Span">医疗</span>
                            <span   tapmode="hover"   onclick="selfAdaption(this);event.cancelBubble=true;" class="no2_li_Span">医疗</span>
                            <span   tapmode="hover"   onclick="selfAdaption(this);event.cancelBubble=true;" class="no no2_li_Span">教育</span>
                        </li>
                        <li class="no2List clearfix"   tapmode="hover"   onclick="li_spanP(this);event.cancelBubble=true;">
                            <p>TA代理代办的<span class="no2Icon"></span></p>
                            <span   tapmode="hover"   onclick="selfAdaption(this);event.cancelBubble=true;" class="no2_li_Span spanSel">全部</span>
                            <span   tapmode="hover"   onclick="selfAdaption(this);event.cancelBubble=true;" class="no2_li_Span">摄影摄</span>
                            <span   tapmode="hover"   onclick="selfAdaption(this);event.cancelBubble=true;" class="no no2_li_Span">摄影摄</span>
                            <span   tapmode="hover"   onclick="selfAdaption(this);event.cancelBubble=true;" class="no2_li_Span">摄影摄</span>
                            <span   tapmode="hover"   onclick="selfAdaption(this);event.cancelBubble=true;" class="no2_li_Span">医疗</span>
                            <span   tapmode="hover"   onclick="selfAdaption(this);event.cancelBubble=true;" class="no no2_li_Span">教育</span>
                        </li>
                        <li class="no2List clearfix"   tapmode="hover"   onclick="li_spanP(this);event.cancelBubble=true;">
                            <p>TA公司<span class="no2Icon"></span></p>
                            <span   tapmode="hover"   onclick="selfAdaption(this);event.cancelBubble=true;" class="no2_li_Span spanSel">全部</span>
                            <span   tapmode="hover"   onclick="selfAdaption(this);event.cancelBubble=true;" class="no2_li_Span">摄影摄影摄影</span>
                            <span   tapmode="hover"   onclick="selfAdaption(this);event.cancelBubble=true;" class="no no2_li_Span">摄影摄影摄影</span>
                            <span   tapmode="hover"   onclick="selfAdaption(this);event.cancelBubble=true;" class="no2_li_Span">摄影摄影摄影</span>
                            <span   tapmode="hover"   onclick="selfAdaption(this);event.cancelBubble=true;" class="no2_li_Span">医疗</span>
                            <span   tapmode="hover"   onclick="selfAdaption(this);event.cancelBubble=true;" class="no no2_li_Span">教育</span>
                        </li>
                    </ul>
                </div>
            </div> 
        </div>
        <div class="footer">
            <span   tapmode="hover"   onclick="enter(0);event.stopPropagation();">重置</span>
            <span   tapmode="hover"   onclick="enter(1);event.stopPropagation();">确定</span>
        </div>
    </div>
    
</body>
<script type="text/javascript" src="../../script/api.js"></script>
<script type="text/javascript" src="../../script/common.js"></script>
<script type="text/javascript">
    var flag = 0;
    apiready = function(){
       fnInit();
    };

     // 选中图标
    function li_span(ele) {
        flag = 1;
        var allDom = $api.not($api.closest(ele, 'li'),'p')
        for (var i = 0; i < allDom.length; i++) {
            $api.removeCls(allDom[i], 'sel');
        }
        $api.addCls(ele, 'sel');
    }

    function li_spanP(ele) {
        if ($api.hasCls(ele, 'sel')) {
            $api.removeCls(ele, 'sel');
             $api.removeCls($api.not(ele,'.no2_li_Span')[1], 'no2Icon2');

        } else {
            var allDom = $api.not($api.closest(ele, 'ul'),'p')
            var allP = $api.domAll('.no2Icon');
            for (var i = 0; i < allP.length; i++) {
                 $api.removeCls(allP[i], 'no2Icon2');
            }
            $api.addCls($api.not(ele,'.no2_li_Span')[1], 'no2Icon2');
            for (var i = 0; i< allDom.length; i++) {
                $api.removeCls(allDom[i], 'sel');
            }
            $api.addCls(ele, 'sel');
        }

    }
    function selfAdaption(ele) {
        flag = 1;
        var allDom = ele.parentNode.getElementsByClassName("no2_li_Span")
        if ($api.hasCls(ele, 'spanSel')) {
            for (var i = 0; i < allDom.length; i++) {
                $api.addCls(allDom[i], 'show');
                 $api.removeCls(allDom[i], 'hide');
            }
        } else {
            for (var i = 0; i < allDom.length; i++) {
                $api.removeCls(allDom[i], 'spanSel');
                $api.removeCls(allDom[i], 'show');
                $api.addCls(allDom[i], 'hide');
            }
            $api.addCls(ele, 'spanSel');
            $api.addCls(ele, 'show');
        }
    }

    // 点击确定按钮： 1； 重置按钮 0
    function enter(n) {
        if (n) {
            var sel = $api.domAll('.no1 .sel');
            var spanSel = $api.domAll('.spanSel');
            var parameter = {
                type: 1,
                sub_type: 1,
                category_ids: '',
                order: ''
            }
            parameter.type = ($api.text(sel[1]) == '个人') ? 1 : 2;
            parameter.sub_type = ($api.text(sel[2]) == '自产自销') ? 1 : 2;

            var order = $api.text(sel[3])
            switch (order) {
                case '全部': parameter.order = '';
                break;
                case '距离最近': parameter.order = 'distance';
                break;
                case '价格最低': parameter.order = 'price';
                break;
                case '最新发布': parameter.order = 'create_time';
                break;

            }
            alert(JSON.stringify(parameter))
            // 发送事件, 刷新筛选结果
            api.sendEvent({
                name: 'searchSupply3',
                extra: {
                    parameter: parameter,
                    flag: flag
                }
            });
            api.closeFrame();
        }
        else {
            var no1 = document.getElementsByClassName('no1')[0]
            var liArr = no1.getElementsByTagName('li');
            for (var i = 0; i < liArr.length; i++) {
                for(var j = 0; j < liArr[i].childNodes.length ; j++) {
                    $api.removeCls(liArr[i].childNodes[j], 'sel');
                }
                $api.addCls(liArr[i].childNodes[3], 'sel');
            }  
            for (var i = 0; i < $api.domAll('.no2List').length; i++) {
                $api.removeCls($api.domAll('.no2List')[i], 'sel');
                for(var j = 0; j < $api.domAll('.no2List')[i].childNodes.length ; j++) {
                    $api.removeCls($api.domAll('.no2List')[i].childNodes[j], 'spanSel');
                }
                $api.addCls($api.domAll('.no2List')[i].childNodes[3], 'spanSel');
            }
            $api.addCls($api.domAll('.no2List')[0], 'sel');
            var no2Icon = $api.domAll('.no2Icon')
            for (var i = 0; i < no2Icon.length; i++) {
                $api.removeCls(no2Icon[i], 'no2Icon2');
            }
            $api.addCls(no2Icon[0], 'no2Icon2');

        }
    }


   
    
   
   
</script>
</html>