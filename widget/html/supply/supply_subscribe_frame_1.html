<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"><meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <title>title</title>
    <link rel="stylesheet" type="text/css" href="../../css/api.css"/>
    <style>
       

       
        .main .listContent {
            width: 100%;
            box-sizing: border-box;
            border-bottom: 1px solid #E0E0E0;
            background-color: #fff;
            padding:  .3rem .3rem; 
            margin-top: .2rem;
            font-size: 0;
            position: relative;
        }
        .main .listContent .img {
            width: .785rem;
            margin-right: .2rem;
        }
        .listContent .title {
            width: 100%;
        }
        .title_name {
            font-size: 0;
        }
        .title_name  span{
            display: inline-block;
            font-size: .34rem;
        }
        .title_name .name {
            height: .34rem;
        }
        .title_name .person {
           
            width: .24rem;
            height: .24rem;
            background: url(../../image/icon_supply/icon_person.png)no-repeat;
            background-size: .24rem .24rem;
            margin: 0 .2rem;
        }
        .title_name .bitmap {
            height: .24rem;
            width: .21rem;
            background: url(../../image/icon_supply/icon_bitmap.png)no-repeat;
            background-size: .21rem .24rem;
        }
        .title_name .score {
            height: .24rem;
            font-size: .2rem;
            margin-left: .1rem;
            color: #1783FF;
            vertical-align:bottom;
        }
        .title_name .position {
           font-size: .24rem;
           margin-top: .1rem;
        }
         .title_name .position span {
            display: inline-block;
            width: .63rem;
            height: .26rem;
            text-align: center;
            font-size: .2rem;
            line-height: .26rem;
            border: 1px solid #1783FF;
            border-radius: .01rem;
            color: #1783FF;
         }
        .title .price {
            font-size: .34rem;
            color: #0ABB07;
         }
         .company {
            font-size: .24rem;
            color: #555;
         }
        .content {
            padding-top: 1.2rem;
            padding-left: 1rem;
        }
        .content  img {
            height: 2.86rem;
            margin: .1rem .1rem;
        }
        .content  img:nth-child(4),
        .content  img:nth-child(7),
        .content  img:first-child {
            margin-left: 0;
        }
        .content  img:nth-child(3n) {
            margin-right: 0;
        }
        .content  img:last-child {
            margin-right: 0;
        }
        .content .time {
            margin-top: .2rem;
            font-size: .2rem;
            color: #999;
        }
        .content .icon_comment {
            display: inline-block;
            width: .34rem;
            float: right;
            height: .26rem;
            background: url(../../image/icon_supply/icon_comment.png)no-repeat;
            -webkit-background-size: .34rem .26rem;
            background-size: .34rem .26rem;
        }
        .comment {
            font-size: 0;
            padding-left: 1rem;
            margin-top: .2rem;

        }
        .comment li {
            font-size: .24rem;
            background: #F3F3F5;
            padding: .05rem .2rem;
        }
        .content_text {
            font-size: .28rem;
        }
        .results {
            font-size: .24rem;
            color: #2BD242;
            text-align: center;
            height: .8rem;
            line-height: .8rem;
            
        }
        .results span {
            display: inline-block;
            background:url(../../image/icon_supply/icon_person.png)no-repeat ;
            -webkit-background-size: .3rem .3rem;
            background-size: .3rem .3rem;
            width: .3rem;
            height: .3rem;
            vertical-align: text-top;
            margin-right: .2rem;
            
        }
        .title1 {
            margin-top: .2rem;
            padding: 0 .3rem;
            background-color: #fff;
            display: none;
        }
    </style>
</head>
<body>
    <!--  -->
    <div class="main">  
<div class="title1">
        <p class="results"   tapmode="hover"   onclick="viewResults(this)">
            <span></span>
           当筛选结果有变动时通知我
            
        </p>
    </div>
        <!-- <ul>
            <li class="listContent clearfix"   tapmode="hover"   onclick="info()">
                <div class="title clearfix fl">
                    <img class="img fl" src="../../image/tx_2.jpg">
                    <div class="title_name fl">
                        <span class="name">陈胜东</span>
                        <span class="person"></span>
                        <span class="bitmap"></span>
                        <span class="score">700分</span>
                        <p class="position">
                            <span>公司</span>
                         网站开发</p>
                        <p class="company">第一学科技公司</p>
                    </div>
                    <p class=   "fr price">1000元/单</p>
                </div>
                <div class="content clearfix">
                   <div class="content_text">
                       <img class="content_img" src="../../image/tx_2.jpg">
                   </div>
                   <p class="time">
                       2天前
                       <span class="icon_comment"></span>
                   </p>
                </div>
                <ul class="comment">
                    <li>
                        <span .comment_name>李志超:</span>
                        <span class="comment_content">我是一条评论</span>
                    </li>
                </ul>
            </li>
            <li class="listContent clearfix"   tapmode="hover"   onclick="info()">
                <div class="title clearfix fl">
                    <img class="img fl" src="../../image/tx_2.jpg">
                    <div class="title_name fl">
                        <span class="name">陈胜东</span>
                        <span class="person"></span>
                        <span class="bitmap"></span>
                        <span class="score">700分</span>
                        <p class="position">
                            <span>公司</span>
                         网站开发</p>
                        <p class="company">第一学科技公司</p>
                    </div>
                    <p class=   "fr price">1000元/单</p>
                </div>
                <div class="content clearfix">
                   <div class="content_text">
                       <img class="content_img" src="../../image/tx_2.jpg">
                       <img class="content_img" src="../../image/tx_2.jpg">
                       
                   </div>
                   <p class="time">
                       2天前
                       <span class="icon_comment"></span>
                   </p>
                </div>
                <ul class="comment">
                    <li>
                        <span .comment_name>李志超:</span>
                        <span class="comment_content">我是一条评论</span>
                    </li>
                </ul>
            </li>
            <li class="listContent clearfix"   tapmode="hover"   onclick="info()">
                <div class="title clearfix fl">
                    <img class="img fl" src="../../image/tx_2.jpg">
                    <div class="title_name fl">
                        <span class="name">陈胜东</span>
                        <span class="person"></span>
                        <span class="bitmap"></span>
                        <span class="score">700分</span>
                        <p class="position">
                            <span>公司</span>
                         网站开发</p>
                        <p class="company">第一学科技公司</p>
                    </div>
                    <p class=   "fr price">1000元/单</p>
                </div>
                <div class="content clearfix">
                   <p class="content_text">
                       我是文案我是文案我是文案我是文案我是文案我是文案我是文案
                   </p>
                   <div>
                       <img class="content_img" src="../../image/tx_2.jpg">
                       <img class="content_img" src="../../image/tx_2.jpg">
                       <img class="content_img" src="../../image/tx_2.jpg">
                       <img class="content_img" src="../../image/tx_2.jpg">
                       <img class="content_img" src="../../image/tx_2.jpg">
                       <img class="content_img" src="../../image/tx_2.jpg">
                       <img class="content_img" src="../../image/tx_2.jpg">
                       <img class="content_img" src="../../image/tx_2.jpg">
                       
                   </div>
                   <p class="time">
                       2天前
                       <span class="icon_comment"></span>
                   </p>
                </div>
                <ul class="comment">
                    <li>
                        <span .comment_name>李志超:</span>
                        <span class="comment_content">我是一条评论</span>
                    </li>
                </ul>
            </li>
        </ul> -->
        <ul class="resultList"> 
            <li class="listContent clearfix"   tapmode="hover"   onclick="info()">
                <div class="title clearfix fl">
                    <img class="img fl" src="../../image/tx_2.jpg">
                    <div class="title_name fl">
                        <span class="name">陈胜东</span>
                        <span class="person"></span>
                        <span class="bitmap"></span>
                        <span class="score">700分</span>
                        <p class="position">
                            <span>公司</span>
                         网站开发</p>
                        <p class="company">第一学科技公司</p>
                    </div>
                    <p class=   "fr price">1000元/单</p>
                </div>
                <div class="content clearfix">
                   <div class="content_text">
                       <img class="content_img" src="../../image/tx_2.jpg">
                       <img class="content_img" src="../../image/tx_2.jpg">
                       <img class="content_img" src="../../image/tx_2.jpg">
                       <img class="content_img" src="../../image/tx_2.jpg">
                   </div>
                   <p class="time">
                       2天前
                       <span class="icon_comment"></span>
                   </p>
                </div>
                <ul class="comment">
                    <li>
                        <span .comment_name>李志超:</span>
                        <span class="comment_content">我是一条评论</span>
                    </li>
                </ul>
            </li>
        </ul>
        <script type="text/x-dot-template" id="listT">
            {{ for (var i = 0; i < it.length; i++) { }} 
                    <li class="listContent clearfix"   tapmode="hover"   onclick="info()">
                        <div class="title clearfix fl">
                            <img class="img fl" src="{{=it[i].headUrl}}">
                            <div class="title_name fl">
                                <span class="name">{{=it[i].name}}</span>
                                <span class="person"></span>
                                <span class="bitmap"></span>
                                <span class="score">{{=it[i].zmf}}分</span>
                                <p class="position">
                                    <span>公司</span>
                                 {{=it[i].posi}}</p>
                                <p class="company">{{=it[i].gongshi}}</p>
                            </div>
                            <p class=   "fr price">{{=it[i].dnnjia}}元/单</p>
                        </div>
                        <div class="content clearfix">
                           <div class="content_text">
                                 {{ for (var j = 0; j < it[i].img.length; j++) { }} 
                               <img class="content_img" src="{{=it[i].img[j]}}">
                               {{ } }}
                           </div>
                           <p class="time">
                               {{=it[i].time}}天前
                               <span class="icon_comment"></span>
                           </p>
                        </div>
                        <ul class="comment">
                            <li>
                                <span .comment_name>李志超:</span>
                                <span class="comment_content">我是一条评论</span>
                            </li>
                        </ul>
                    </li>   
                {{ }; }}
        </script>
    </div>
   
</body>
<script type="text/javascript" src="../../script/api.js"></script>
<script type="text/javascript" src="../../script/common.js"></script>
<script type="text/javascript" src="../../script/doT.min.js"></script>

<script type="text/javascript">
    var data = [{
        name:'陈胜东',
        headUrl: '../../image/tx_2.jpg',
        zmf: '700',
        posi: '网站开发',
        gongshi:'第一学科技公司',
        dnnjia: '1000',
        img: ['../../image/tx_2.jpg','../../image/tx_3.jpg'],
        time: '2'
    },{
        name:'陈胜东',
        headUrl: '../../image/tx_2.jpg',
        zmf: '700',
        posi: '网站开发',
        gongshi:'第一学科技公司',
        dnnjia: '1000',
        img: ['../../image/tx_2.jpg','../../image/tx_3.jpg','../../image/tx_2.jpg','../../image/tx_3.jpg','../../image/tx_2.jpg','../../image/tx_3.jpg','../../image/tx_2.jpg','../../image/tx_3.jpg'],
        time: '2'
    },
    {
        name:'陈胜东',
        headUrl: '../../image/tx_2.jpg',
        zmf: '700',
        posi: '网站开发',
        gongshi:'第一学科技公司',
        dnnjia: '1000',
        img: ['../../image/tx_2.jpg'],
        time: '2'
    }]
 var data2 = [{
        name:'陈胜东',
        headUrl: '../../image/tx_2.jpg',
        zmf: '1000',
        posi: '网站开发',
        gongshi:'第一学科技公司',
        dnnjia: '100',
        img: ['../../image/tx_1.jpg','../../image/tx_3.jpg'],
        time: '2'
    },{
        name:'陈胜东',
        headUrl: '../../image/tx_2.jpg',
        zmf: '700',
        posi: '网站开发',
        gongshi:'第一学科技公司',
        dnnjia: '1000',
        img: ['../../image/tx_2.jpg','../../image/tx_3.jpg','../../image/tx_1.jpg','../../image/tx_4.jpg','../../image/tx_2.jpg','../../image/tx_3.jpg','../../image/tx_2.jpg','../../image/tx_3.jpg'],
        time: '2'
    },
    {
        name:'陈胜东',
        headUrl: '../../image/tx_2.jpg',
        zmf: '700',
        posi: '网站开发',
        gongshi:'第一学科技公司',
        dnnjia: '1000',
        img: ['../../image/tx_2.jpg'],
        time: '2'
    }]

var data3 = [{
        name:'陈胜东',
        headUrl: '../../image/tx_2.jpg',
        zmf: '1000',
        posi: '网站',
        gongshi:'第二学科技公司',
        dnnjia: '100',
        img: ['../../image/tx_1.jpg','../../image/tx_3.jpg','../../image/tx_3.jpg','../../image/tx_3.jpg','../../image/tx_3.jpg'],
        time: '2'
    },{
        name:'陈胜东',
        headUrl: '../../image/tx_2.jpg',
        zmf: '700',
        posi: '网站',
        gongshi:'第二学科技公司',
        dnnjia: '1000',
        img: ['../../image/tx_2.jpg','../../image/tx_3.jpg','../../image/tx_1.jpg','../../image/tx_4.jpg','../../image/tx_2.jpg','../../image/tx_3.jpg','../../image/tx_2.jpg','../../image/tx_3.jpg'],
        time: '2'
    },
    {
        name:'陈胜东',
        headUrl: '../../image/tx_2.jpg',
        zmf: '700',
        posi: '网站',
        gongshi:'第二学科技公司',
        dnnjia: '1000',
        img: ['../../image/tx_2.jpg'],
        time: '2'
    }]


    selfAdaption();
    apiready = function(){
        selfAdaption();
        api.addEventListener({
           name: 'screeningResults'
       }, function(ret, err) {
           $api.css($api.dom('.title1'), 'display:block');
           
           getData(data);
           selfAdaption();
       })

       api.addEventListener({
           name: 'addPublish'
       }, function(ret, err) {
          api.openFrame({
              name: 'supply_addSupply',
              url: 'supply_addSupply.html',
              rect: {
                  x: 0,
                  y: api.pageParam.headerH,
                  w: api.winWidth,
                  h: api.winHeight
              },
              bounces: false
          });
       });
    };

    // 根据上传图片的多少自适应图片的大小
    function selfAdaption() {
        var listContent = $api.domAll('.listContent');

        for (var i = 0; i < listContent.length; i++) {
            var imgArr = listContent[i].getElementsByClassName('content_img');
            console.log(imgArr)
            var imgCount = imgArr.length
            if (imgCount == 1) {
                    $api.css(listContent[i].getElementsByClassName('content_img')[i], 'width:2.86rem;margin:0');

            } else if (imgCount == 2) {
                for (var j = 0; j < imgCount; j++) {
                    $api.css(listContent[i].getElementsByClassName('content_img')[j], 'height:2.7rem');
                }
            } else if (imgCount == 3) {
                 for (var j = 0; j < imgCount; j++) {
                    $api.css(listContent[i].getElementsByClassName('content_img')[j], 'height:1.7rem');
                }
            } else {
                for (var j = 0; j < imgCount; j++) {
                    $api.css(listContent[i].getElementsByClassName('content_img')[j], 'height:1.7rem');
                }
            }
        }
    }
    

     // doT模版获取数据
    function getData(data) {
        var listTText = $api.byId('listT').text;
        var fnListT = doT.template(listTText);
        var html = fnListT(data);
        var list = $api.dom('.resultList');
        // 替换resultList所有内容
        $api.html(list, html);
        // alert('getData:' + JSON.stringify(data))
    }

    function viewResults(ele) {
       
        $api.css($api.dom('.results'), 'background: #fff url(../../image/icon_zk.png)no-repeat;background-position: right center;-webkit-background-size: .15rem .25rem;background-size: .15rem .25rem;');
        // $api.css(ele, 'b');
        // getData(data2);
        // selfAdaption();
        if ($api.text(ele) == '查看订阅的筛选结果') {
            // getData(data3);
            // selfAdaption();
            api.openWin({
                name: 'winName',
                url: 'winPath',
                pageParam: {
                    name: 'value'
                }
            });
        }
         $api.html(ele, '查看订阅的筛选结果');
    }
</script>
</html>