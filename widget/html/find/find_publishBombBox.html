<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"><meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <title>title</title>
    <link rel="stylesheet" type="text/css" href="../../css/api.css"/>
    <style>
      html, body {
        background-color: rgba(0,0,0,0.3);
        color: #fff;
        width: 100%;
        height: 100%;
      }
      header.header {
        opacity: 0;
      }
      div {
        width: 100%;
        height: 100%;
      }
      ul {
        margin-top: .12rem;
        width: 2.48rem;
        height: 1.55rem;
        margin-right: .1rem;
        float: right;
        /*padding: .12rem  0;*/
        background: #3A393F;
        box-sizing: border-box;
        -webkit-background-size: 2.24rem 1.77rem;
        background-size: 2.24rem 1.77rem;
        font-size: .28rem;
        position: relative;
      }
      ul:after {
        content: '';
        display: inline-block;
        width: 0;
        height: 0;
        border-right: .2rem solid transparent;
        border-left: .2rem solid transparent;
        border-bottom: .12rem solid #3A393F;
        position: absolute;
        right: .28rem;
        top: -.1rem;
      }
      ul li {
        padding-left: .95rem;
        height: .775rem;
        line-height: .775rem;
        
      }
      
      ul li:first-child {
        background: url(../../image/icon_find/icon_publishPro.png)no-repeat;
        background-size: .34rem .20rem;
        background-position: .25rem center;
        border-bottom: .01rem solid #4E4C51;
      }
      ul li.notJoin {
        background: url(../../image/icon_find/icon_addCircle.png)no-repeat;
        background-size: .31rem .31rem;
        background-position: .25rem center;
      }
      ul li.lastchild {
        background: url(../../image/icon_find/icon_circleInfo.png)no-repeat;
        background-size: .24rem .28rem;
        background-position: .3rem center;
      }
    </style>
</head>
<body   tapmode   onclick="api.closeFrame()">
   <div   tapmode   onclick="api.closeFrame()">
    <header class="header">
      <div class="head"></div>
    </header>
       <ul>
           <li class="firstchild"   tapmode   onclick="publish(0);event.stopPropagation();">发布主题</li>
           <li class="lastchild"   tapmode   onclick="publish(1);event.stopPropagation();">圈信息</li>
       </ul>
   </div>   
</body>
<script type="text/javascript" src="../../script/api.js"></script>
<script type="text/javascript" src="../../script/common.js"></script>
<script type="text/javascript">
    apiready = function(){
      fnInit();
        // $api.css($api.dom('ul'), 'margin-top:' + api.pageParam.headerH + 'px;');
        if (api.pageParam.flag==1) {

        } else {
          $api.addCls($api.dom('.firstchild'), 'notJoin');
          $api.text($api.dom('.firstchild'), '我要加入');
        }
    };
    function publish(n) {
      // if(api.pageParam.flag) {
      if(n) {
        // flag参数是1,未加入圈子,
          // 点击  我要加入, n == 0, 
          // 打开圈信息的时候 看不到所有, 传给find_cricleInfo_win, 0参数
        //  0已加入圈子
          // 点击 发布项目, 
          // 点击圈信息, 可查看所有信息 传递 n == 1
            api.openWin({
              name: 'find_cricleInfo_win',
              url: './find_cricleInfo_win.html',
              bounces: false,
              pageParam: {
                flag : 0,
                circle_id: api.pageParam.circle_id
              }
            });
        
      } else {
        if (api.pageParam.flag==0) {
            api.openWin({
              name: 'find_cricleInfo_win',
              url: './find_cricleInfo_win.html',
              bounces: false,
              pageParam: {
                circle_id: api.pageParam.circle_id
              }
            });
        } else {
            api.openWin({
              name: 'find_publishPro_win',
              url: './find_publishPro_win.html',
              bounces: false,
              pageParam: {
                circle_id: api.pageParam.circle_id
              }
            });
            
        }
      }
      setTimeout(function(){
        api.closeFrame();
      },500)
    }



   
   
</script>
</html>